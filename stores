<div class="header_banner">
    <div class="main_container">
        <h4 class="header_banner_heading">Directory</h4>
    </div>
</div>

<div class="main_container mobile_padding">
    <div class="store_nav hidden_phone">
        <div class="row">
            <div class="col-md-3">
                <a class="active_store_nav" href="/stores">STORES</a>
            </div>
            <div class="col-md-3">
                <a href="/map">CENTER MAP</a>
            </div>
            <div class="col-md-4">
                <span>Sort By: </span>
                <a href="#" class="show_all_stores">ALPHABETICAL</a>
            </div>
            <div class="col-md-2">
                <a href="#" id="cat_dd" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    CATEGORIES
                    <img src="http://assets.codecloudapp.com/sites/5730acef6e6f6455e0000000/image/png/1463153622000/chevron_down.png" class="category_icon" alt="">
                </a>
                <ul id="category_container" class="dropdown-menu" aria-labelledby="cat_dd">
                    <script id="category_template" type="x-tmpl-mustache/text">
                        <li class="show_cat_stores" data-id="{{id}}">{{name}}</li>    
                    </script>
                </ul>
            </div>
        </div>
    </div>
    <div class="row content_container">
        <div class="col-md-12">
            <span class="store_initial hidden_now" id="cat_name"></span>
        </div>
        <div id="store_list_container" class="col-md-6">
            <script id="store_list_template" type="x-tmpl-mustache/text">
                <span style="{{show}}" class="store_initial open_stores" data-initial="{{initial}}">{{initial}}</span>
                <div class="row cats_row open_{{initial}}" data-cat="{{cat_list}}">
                    <div class="col-md-12">
                        <p class="store_list_name"><a href="/stores/{{slug}}">{{name}}</a></p>
                    </div>
                </div>
            </script>
        </div>
        <div id="store_list_container2" class="col-md-6">
            <script id="store_list_template2" type="x-tmpl-mustache/text">
                <span style="{{show}}" class="store_initial">{{initial}}</span>
                <div class="row cats_row" data-cat="{{cat_list}}">
                    <div class="col-md-12">
                        <p class="store_list_name"><a href="/stores/{{slug}}">{{name}}</a></p>
                    </div>
                </div>
            </script>
        </div>
    </div>
</div>

<script>
    $(document).ready(function(e){
        init(e);
        loadMallDataCached(renderPage);
        show_content();
        $('#category_container').prepend('<li href="#" class="show_all_stores">All</li>');
        show_cat_stores();
    })
    
    function renderPage(){
        var stores = getStoresList();
        renderStoreList('#store_list_container','#store_list_template', stores, "stores", "A", "M");
        renderStoreList('#store_list_container2','#store_list_template2', stores, "stores","M", "Z" );
        var categories = getStoreCategories();
        renderGeneral('#category_container', '#category_template', categories);
    }
</script>